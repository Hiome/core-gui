(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{146:function(t,e,n){"use strict";n.r(e);n(160),n(162),n(163),n(75);var o=n(161),a=n.n(o),r=(n(159),n(164)),i=n.n(r),s=n(7),c=n.n(s),m=n(0),l=n.n(m),u=n(156),d=n(154),p=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).state={id:null,settingRoom1:!0,room1:null,room1_name:null,room2:null,room2_name:null,rooms:[]},e.updateRoom=function(t){var n=t.target.value,o=t.target.options[t.target.selectedIndex].text,a=e.state.rooms;if("null"===n&&(n=null,o=null),"new"===n){if(!(o=prompt("What is the name of this room?","Living Room")))return;n=Date.now()/1e3|0,fetch("/api/1/rooms",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:n,name:o,occupancy_count:0})}),a.push({id:n,name:o,occupancy_count:0})}e.state.settingRoom1?e.setState({room1:n,room1_name:o,rooms:a}):e.setState({room2:n,room2_name:o,rooms:a})},e.nextRoom=function(){null!==e.state.room1&&e.setState({settingRoom1:!1})},e.saveSensor=i()(a.a.mark(function t(){var n,o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.state.room2){t.next=5;break}return n="external"===e.state.room1?"":e.state.room1,o="external"===e.state.room2?"":e.state.room2,t.next=5,fetch("/api/1/sensors",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:e.state.id,room_id:n+"::"+o,name:e.state.room1_name+" <-> "+e.state.room2_name,type:"door"})}).then(function(t){return window.location.href="/"});case 5:case"end":return t.stop()}},t)})),e}c()(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=i()(a.a.mark(function t(){var e,n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new URL(document.location).searchParams,this.setState({id:e.get("id"),room1:e.get("r1"),room2:e.get("r2")}),t.next=4,fetch("/api/1/rooms").then(function(t){return t.json()});case 4:n=t.sent,this.setState({rooms:n});case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),n.formQuestion=function(){return this.state.settingRoom1?l.a.createElement("label",{htmlFor:"name"},"Which room is this sensor going in?"):l.a.createElement("label",{htmlFor:"name"},"Which room is on the other side of the door?")},n.renderButton=function(){return this.state.settingRoom1?l.a.createElement("button",{onClick:this.nextRoom},"Next"):l.a.createElement("button",{onClick:this.saveSensor},"Finish")},n.renderRoomOptions=function(){var t=[],e=this.state.rooms,n=Array.isArray(e),o=0;for(e=n?e:e[Symbol.iterator]();;){var a;if(n){if(o>=e.length)break;a=e[o++]}else{if((o=e.next()).done)break;a=o.value}var r=a;(this.state.settingRoom1||r.id!==this.state.room1)&&t.push(l.a.createElement("option",{key:"room"+r.id,value:r.id},r.name))}return t},n.renderExternalOption=function(){if(this.state.settingRoom1||"external"!==this.state.room1)return l.a.createElement("option",{value:"external"},"Outside")},n.renderRoomForm=function(){return null===this.state.id?l.a.createElement("p",null,"Invalid QR Code..."):l.a.createElement("div",null,this.formQuestion(),l.a.createElement("br",null),l.a.createElement("select",{onChange:this.updateRoom,value:this.state.settingRoom1?this.state.room1||"null":this.state.room2||"null"},l.a.createElement("option",{value:"null"},"Select a room..."),this.renderRoomOptions(),this.renderExternalOption(),l.a.createElement("option",{value:"new"},"Add New Room")),l.a.createElement("br",null),this.renderButton())},n.render=function(){return l.a.createElement(u.a,null,l.a.createElement(d.a,{title:"Add Sensor"}),l.a.createElement("div",{style:{margin:"0 auto",textAlign:"center"}},this.renderRoomForm()))},e}(m.Component);e.default=p},150:function(t,e,n){var o;t.exports=(o=n(152))&&o.default||o},151:function(t,e,n){"use strict";var o=n(0),a=n.n(o),r=n(4),i=n.n(r),s=n(33),c=n.n(s);n.d(e,"a",function(){return c.a});n(150),a.a.createContext({});i.a.object,i.a.string.isRequired,i.a.func,i.a.func},152:function(t,e,n){"use strict";n.r(e);n(34);var o=n(0),a=n.n(o),r=n(4),i=n.n(r),s=n(55),c=n(2),m=function(t){var e=t.location,n=c.default.getResourcesForPathnameSync(e.pathname);return a.a.createElement(s.a,Object.assign({location:e,pageResources:n},n.json))};m.propTypes={location:i.a.shape({pathname:i.a.string.isRequired}).isRequired},e.default=m},153:function(t,e,n){"use strict";var o=n(151),a=n(0),r=n.n(a);e.a=function(){return r.a.createElement("header",{style:{marginBottom:"1.45rem"}},r.a.createElement("div",{style:{margin:"0 auto",maxWidth:960,padding:"1.45rem 1.0875rem"}},r.a.createElement("h1",{style:{margin:0,textAlign:"center"}},r.a.createElement(o.a,{to:"/",style:{color:"white",textDecoration:"none"}},"Hiome"))))}},154:function(t,e,n){"use strict";var o=n(155),a=n(0),r=n.n(a),i=n(4),s=n.n(i),c=n(158),m=n.n(c);function l(t){var e=t.description,n=t.lang,a=t.meta,i=t.keywords,s=t.title,c=o.data.site,l=e||c.siteMetadata.description;return r.a.createElement(m.a,{htmlAttributes:{lang:n},title:s,titleTemplate:"%s | "+c.siteMetadata.title,meta:[{name:"description",content:l},{property:"og:title",content:s},{property:"og:description",content:l},{property:"og:type",content:"website"},{name:"twitter:card",content:"summary"},{name:"twitter:creator",content:c.siteMetadata.author},{name:"twitter:title",content:s},{name:"twitter:description",content:l}].concat(i.length>0?{name:"keywords",content:i.join(", ")}:[]).concat(a)})}l.defaultProps={lang:"en",meta:[],keywords:[],description:""},l.propTypes={description:s.a.string,lang:s.a.string,meta:s.a.arrayOf(s.a.object),keywords:s.a.arrayOf(s.a.string),title:s.a.string.isRequired},e.a=l},155:function(t){t.exports={data:{site:{siteMetadata:{title:"Hiome",description:"Your home's personal dashboard.",author:"Hiome Inc"}}}}},156:function(t,e,n){"use strict";var o=n(0),a=n.n(o),r=n(4),i=n.n(r),s=n(153),c=(n(157),function(t){var e=t.children;return a.a.createElement(a.a.Fragment,null,a.a.createElement(s.a,null),a.a.createElement("div",{style:{margin:"0 auto",maxWidth:960,padding:"0px 0px 1.45rem"}},a.a.createElement("main",null,e)))});c.propTypes={children:i.a.node.isRequired},e.a=c}}]);
//# sourceMappingURL=component---src-pages-sensors-add-js-51444c6b59a79ae65b80.js.map