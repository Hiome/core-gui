(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{185:function(e,t,a){"use strict";a.r(t);a(303);var n=a(417),r=a.n(n),i=(a(36),a(57),a(44),a(24),a(12),a(238),a(241)),s=a.n(i),o=(a(82),a(9),a(7)),l=a.n(o),c=a(0),u=a.n(c),d=a(239),f=a(216),h=a(205),m=a(684),p=a(197),g=a(685),b=a.n(g),y=function(){return u.a.createElement(p.b,{query:"1821934470",render:function(e){return u.a.createElement(b.a,{fluid:e.placeholderImage.childImageSharp.fluid,alt:"IFTTT Documentation Link",loading:"auto"})},data:m})},E=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).state={token:null,rooms:[],doors:[]},t.saveToken=function(e){if(null!=e.target&&null!=e.target.value){var a=e.target.value.trim();t.setState({token:a});var n=Object(d.connect)("ws://"+window.location.host+":1884");n.on("connect",function(){return n.publish("_hiome/integrate/ifttt",a,{retain:!0},function(){return n.end()})})}},t}l()(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this,t=Object(d.connect)("ws://"+window.location.host+":1884");t.on("connect",function(){t.subscribe("_hiome/integrate/ifttt",{qos:1})}),t.on("message",function(e,a,n){null==a||this.state.token||(this.setState({token:a.toString()}),t.end())}.bind(this)),fetch("/api/1/rooms").then(function(e){return e.json()}).then(function(t){return e.setState({rooms:t})}),fetch("/api/1/sensors?type=door").then(function(e){return e.json()}).then(function(t){return e.setState({doors:t})})},a.start=function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement("p",null,"To find your key, go to ",u.a.createElement("strong",null,u.a.createElement("a",{href:"https://ifttt.com/maker_webhooks",target:"_blank",rel:"noopener noreferrer"},"https://ifttt.com/maker_webhooks"))," (sign in if necessary) and click the ",u.a.createElement("em",null,"Documentation")," button in the top right corner."),u.a.createElement(y,null))},a.instructions=function(){return u.a.createElement(s.a,{status:"success",title:"Hiome is publishing events to IFTTT!"},u.a.createElement("p",null,"You can now connect Hiome to other services via the Webhooks trigger."),u.a.createElement("ol",null,u.a.createElement("li",null,u.a.createElement("a",{href:"https://ifttt.com/create",target:"_blank",rel:"noopener noreferrer"},"Create a new IFTTT applet")),u.a.createElement("li",null,'Click "+ This"'),u.a.createElement("li",null,'Search for "webhooks" and choose the ',u.a.createElement("b",null,"Webhooks")," service"),u.a.createElement("li",null,'Choose the "Receive a web request" trigger'),u.a.createElement("li",null,"Enter one of the event names below."),u.a.createElement("li",null,'Click "+ That"'),u.a.createElement("li",null,"Connect your chosen event with any action you want!")),u.a.createElement("p",null,"Hiome is publishing the following events to IFTTT for you:"),this.renderRoomEventNames(),u.a.createElement("p",null,u.a.createElement("em",null,"Doors")),u.a.createElement("ul",null,this.renderDoorEventNames()))},a.sanitizeName=function(e){return e.replace(/[^\w\s_]/g,"").trim().replace(/\s+/g,"_").toLowerCase()},a.renderRoomEventNames=function(){if(0===this.state.rooms.length)return u.a.createElement("p",null,"Loading room names...");var e=[],t=this.state.rooms,a=Array.isArray(t),n=0;for(t=a?t:t[Symbol.iterator]();;){var r;if(a){if(n>=t.length)break;r=t[n++]}else{if((n=t.next()).done)break;r=n.value}var i=r,s=this.sanitizeName(i.name);e.push(u.a.createElement("p",null,u.a.createElement("em",null,i.name))),e.push(u.a.createElement("ul",null,u.a.createElement("li",null,u.a.createElement("strong",null,"hiome_",s,"_occupied")," → ",i.name," is occupied"),u.a.createElement("li",null,u.a.createElement("strong",null,"hiome_",s,"_empty")," → ",i.name," is empty"),u.a.createElement("li",null,u.a.createElement("strong",null,"hiome_",s,"_countN")," → ",i.name,"'s occupancy count is N (e.g., hiome_",s,"_count3)")))}return e},a.renderDoorEventNames=function(){if(0===this.state.doors.length)return u.a.createElement("li",null,"Loading door names...");var e=[],t=this.state.doors,a=Array.isArray(t),n=0;for(t=a?t:t[Symbol.iterator]();;){var r;if(a){if(n>=t.length)break;r=t[n++]}else{if((n=t.next()).done)break;r=n.value}var i=r,s=this.sanitizeName(i.name);e.push(u.a.createElement("li",null,u.a.createElement("strong",null,"hiome_",s,"_open")," → ",i.name," is open")),e.push(u.a.createElement("li",null,u.a.createElement("strong",null,"hiome_",s,"_closed")," → ",i.name," is closed")),e.push(u.a.createElement("li",null,u.a.createElement("strong",null,"hiome_",s,"_ajar")," → ",i.name," is ajar"))}return e},a.renderPage=function(){return null===this.state.token||""===this.state.token?this.start():this.instructions()},a.renderTokenInput=function(){return u.a.createElement("p",null,"Your IFTTT key is:",u.a.createElement(r.a,{value:this.state.token,size:"large",placeholder:"Paste your IFTTT key here",onChange:this.saveToken}))},a.render=function(){return u.a.createElement(h.a,{title:"Settings"},u.a.createElement(f.a,{page:"ifttt"}),this.renderTokenInput(),this.renderPage())},t}(c.PureComponent);t.default=E},216:function(e,t,a){"use strict";a(208);var n=a(209),r=a.n(n),i=a(197),s=a(0),o=a.n(s),l=a(11),c=function(e){var t=e.page;return o.a.createElement(r.a,{selectedKeys:[t],mode:"horizontal"},o.a.createElement(r.a.Item,{key:"doors"},o.a.createElement(i.a,{to:"/settings"},"Doors")),o.a.createElement(r.a.Item,{key:"rooms"},o.a.createElement(i.a,{to:"/settings/rooms"},"Rooms")),o.a.createElement(r.a.Item,{key:"homekit"},o.a.createElement(i.a,{to:"/settings/integrations/homekit"},"HomeKit")),o.a.createElement(r.a.Item,{key:"hue"},o.a.createElement(i.a,{to:"/settings/integrations/hue"},"Hue")),o.a.createElement(r.a.Item,{key:"ifttt"},o.a.createElement(i.a,{to:"/settings/integrations/ifttt"},"IFTTT")))};c.propTypes={page:a.n(l).a.string.isRequired},t.a=c},331:function(e,t,a){var n=a(5),r=a(10),i=a(37),s=/"/g,o=function(e,t,a,n){var r=String(i(e)),o="<"+t;return""!==a&&(o+=" "+a+'="'+String(n).replace(s,"&quot;")+'"'),o+">"+r+"</"+t+">"};e.exports=function(e,t){var a={};a[e]=t(o),n(n.P+n.F*r(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",a)}},684:function(e){e.exports={data:{placeholderImage:{childImageSharp:{fluid:{base64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACgUlEQVQoz62S20sUURzHZ2dWy0tsq203s7ygEiqZa+b2UmRoKUbsGL0F9ZBGRWSWXb2l9BAk1rq7uupm5YXSMDM0uiA0OtBLPXR56A8wSqiEiNZzzrff7GxJ7x348PvNmd/5nO/ASBW5K8oqXOn7D+3Kd1duTVeLMxNVd2G6erSsQK0qzVePlReqJ/a61KrdTrV6j1M9UrJZ3Ze3Vt2Z5VDLi7JVd7HLXerKO7A9IzFbMlZBbc+3bVfH4WycwMbzo0g7NYScC6PIbXyCnIYJ5F15CmfrC+onaY+gvQ2nh5FZM4Di1odwXxtDZdskUg+3dYSFKf34kvsYsPWDxd4Ftw2C2wmph+iN1D997+LeqiFw9zPw41Oh0KU3QJJn1hsWxrR/nXP0AdE+xmUvE7J3QVioRvmZiCYUHxNSR6T3c7G0i4t1wZBI7mMippOJxF4skBxRDW/NhLE35+cSbpOwU3DZDyid4i+SD4jvFsgapN5LBIAd9S+RceMT4m4BcSSPDwhmH6DzzR/MhEr7/JwxKPsFN0UIYzWEXqBkXCDwTmB5kFJ4Q0i6PguLj97R5Ra/EASTSG5tigitJFS6SRIWLiakC8IJDz4XqJkGnMP07CFJAFicg6DKlL5/hN8/y12GkC/Ifs4kn4mV+qIRzlwPOMse4sx5nzNHkN55ObP4TIx5OvdLCRrC9x5T6Pn5Q+mnT6bYS+4ACYOAPULOGCUbBzY9ArbQn5AyAiyjWduAWY1kMsmUeyRs+RgwhbVTY9a6mVfyGW3GflHTs1o0Pa1Z01OJ1fWavvKypq+pN/vkRk1f36TpKU1mH103rStntWnrOf11VPXISSmybITjPxBjyH4D5ETGqLsxUIwAAAAASUVORK5CYII=",aspectRatio:1.8676975945017182,src:"/static/f6a8788035718c8f3e426816b153f1f9/a3fa0/ifttt_key.png",srcSet:"/static/f6a8788035718c8f3e426816b153f1f9/e7c66/ifttt_key.png 200w,\n/static/f6a8788035718c8f3e426816b153f1f9/140ea/ifttt_key.png 400w,\n/static/f6a8788035718c8f3e426816b153f1f9/a3fa0/ifttt_key.png 800w,\n/static/f6a8788035718c8f3e426816b153f1f9/4cc84/ifttt_key.png 1200w,\n/static/f6a8788035718c8f3e426816b153f1f9/5faf0/ifttt_key.png 1600w,\n/static/f6a8788035718c8f3e426816b153f1f9/d6358/ifttt_key.png 2174w",sizes:"(max-width: 800px) 100vw, 800px"}}}}}},685:function(e,t,a){"use strict";a(24),a(18),a(9),a(60),a(127),a(686);var n=a(17);t.__esModule=!0,t.default=void 0;var r,i=n(a(7)),s=n(a(66)),o=n(a(131)),l=n(a(122)),c=n(a(0)),u=n(a(11)),d=function(e){var t=(0,l.default)({},e);return t.resolutions&&(t.fixed=t.resolutions,delete t.resolutions),t.sizes&&(t.fluid=t.sizes,delete t.sizes),t},f=Object.create({}),h=function(e){var t=d(e),a=t.fluid?t.fluid.src:t.fixed.src;return f[a]||!1},m=new WeakMap;var p=function(e,t){var a=(void 0===r&&"undefined"!=typeof window&&window.IntersectionObserver&&(r=new window.IntersectionObserver(function(e){e.forEach(function(e){if(m.has(e.target)){var t=m.get(e.target);(e.isIntersecting||e.intersectionRatio>0)&&(r.unobserve(e.target),m.delete(e.target),t())}})},{rootMargin:"200px"})),r);return a&&(a.observe(e),m.set(e,t)),function(){a.unobserve(e),m.delete(e)}},g=function(e){var t=e.src?'src="'+e.src+'" ':'src="" ',a=e.sizes?'sizes="'+e.sizes+'" ':"",n=e.srcSetWebp?"<source type='image/webp' srcset=\""+e.srcSetWebp+'" '+a+"/>":"",r=e.srcSet?'srcset="'+e.srcSet+'" ':"",i=e.title?'title="'+e.title+'" ':"",s=e.alt?'alt="'+e.alt+'" ':'alt="" ';return"<picture>"+n+"<img "+(e.width?'width="'+e.width+'" ':"")+(e.height?'height="'+e.height+'" ':"")+a+r+t+s+i+(e.crossOrigin?'crossorigin="'+e.crossOrigin+'" ':"")+'style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture>'},b=c.default.forwardRef(function(e,t){var a=e.sizes,n=e.srcSet,r=e.src,i=e.style,s=e.onLoad,u=e.onError,d=(0,o.default)(e,["sizes","srcSet","src","style","onLoad","onError"]);return c.default.createElement("img",(0,l.default)({sizes:a,srcSet:n,src:r},d,{onLoad:s,onError:u,ref:t,style:(0,l.default)({position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",objectPosition:"center"},i)}))});b.propTypes={style:u.default.object,onError:u.default.func,onLoad:u.default.func};var y=function(e){function t(t){var a;a=e.call(this,t)||this;var n=!0,r=!1,i=t.fadeIn,o=h(t);!o&&"undefined"!=typeof window&&window.IntersectionObserver&&(n=!1,r=!0),"undefined"==typeof window&&(n=!1),t.critical&&(n=!0,r=!1);var l=!(t.critical&&!t.fadeIn);return a.state={isVisible:n,imgLoaded:!1,imgCached:!1,IOSupported:r,fadeIn:i,hasNoScript:l,seenBefore:o},a.imageRef=c.default.createRef(),a.handleImageLoaded=a.handleImageLoaded.bind((0,s.default)((0,s.default)(a))),a.handleRef=a.handleRef.bind((0,s.default)((0,s.default)(a))),a}(0,i.default)(t,e);var a=t.prototype;return a.componentDidMount=function(){if(this.state.isVisible&&"function"==typeof this.props.onStartLoad&&this.props.onStartLoad({wasCached:h(this.props)}),this.props.critical){var e=this.imageRef.current;e&&e.complete&&this.handleImageLoaded()}},a.componentWillUnmount=function(){this.cleanUpListeners&&this.cleanUpListeners()},a.handleRef=function(e){var t=this;this.state.IOSupported&&e&&(this.cleanUpListeners=p(e,function(){var e=h(t.props);t.state.isVisible||"function"!=typeof t.props.onStartLoad||t.props.onStartLoad({wasCached:e}),t.setState({isVisible:!0},function(){return t.setState({imgLoaded:e,imgCached:t.imageRef.current.currentSrc.length>0})})}))},a.handleImageLoaded=function(){var e,t,a;e=this.props,t=d(e),a=t.fluid?t.fluid.src:t.fixed.src,f[a]=!0,this.setState({imgLoaded:!0}),this.state.seenBefore&&this.setState({fadeIn:!1}),this.props.onLoad&&this.props.onLoad()},a.render=function(){var e=d(this.props),t=e.title,a=e.alt,n=e.className,r=e.style,i=void 0===r?{}:r,s=e.imgStyle,o=void 0===s?{}:s,u=e.placeholderStyle,f=void 0===u?{}:u,h=e.placeholderClassName,m=e.fluid,p=e.fixed,y=e.backgroundColor,E=e.Tag,S=e.itemProp,v=this.state.imgLoaded||!1===this.state.fadeIn,w=!0===this.state.fadeIn&&!this.state.imgCached,k=(0,l.default)({opacity:v?1:0,transition:w?"opacity 0.5s":"none"},o),I="boolean"==typeof y?"lightgray":y,T={transitionDelay:"0.5s"},A=(0,l.default)({opacity:this.state.imgLoaded?0:1},w&&T,o,f),L={title:t,alt:this.state.isVisible?"":a,style:A,className:h};if(m){var R=m;return c.default.createElement(E,{className:(n||"")+" gatsby-image-wrapper",style:(0,l.default)({position:"relative",overflow:"hidden"},i),ref:this.handleRef,key:"fluid-"+JSON.stringify(R.srcSet)},c.default.createElement(E,{style:{width:"100%",paddingBottom:100/R.aspectRatio+"%"}}),I&&c.default.createElement(E,{title:t,style:(0,l.default)({backgroundColor:I,position:"absolute",top:0,bottom:0,opacity:this.state.imgLoaded?0:1,right:0,left:0},w&&T)}),R.base64&&c.default.createElement(b,(0,l.default)({src:R.base64},L)),R.tracedSVG&&c.default.createElement(b,(0,l.default)({src:R.tracedSVG},L)),this.state.isVisible&&c.default.createElement("picture",null,R.srcSetWebp&&c.default.createElement("source",{type:"image/webp",srcSet:R.srcSetWebp,sizes:R.sizes}),c.default.createElement(b,{alt:a,title:t,sizes:R.sizes,src:R.src,crossOrigin:this.props.crossOrigin,srcSet:R.srcSet,style:k,ref:this.imageRef,onLoad:this.handleImageLoaded,onError:this.props.onError,itemProp:S})),this.state.hasNoScript&&c.default.createElement("noscript",{dangerouslySetInnerHTML:{__html:g((0,l.default)({alt:a,title:t},R))}}))}if(p){var z=p,C=(0,l.default)({position:"relative",overflow:"hidden",display:"inline-block",width:z.width,height:z.height},i);return"inherit"===i.display&&delete C.display,c.default.createElement(E,{className:(n||"")+" gatsby-image-wrapper",style:C,ref:this.handleRef,key:"fixed-"+JSON.stringify(z.srcSet)},I&&c.default.createElement(E,{title:t,style:(0,l.default)({backgroundColor:I,width:z.width,opacity:this.state.imgLoaded?0:1,height:z.height},w&&T)}),z.base64&&c.default.createElement(b,(0,l.default)({src:z.base64},L)),z.tracedSVG&&c.default.createElement(b,(0,l.default)({src:z.tracedSVG},L)),this.state.isVisible&&c.default.createElement("picture",null,z.srcSetWebp&&c.default.createElement("source",{type:"image/webp",srcSet:z.srcSetWebp,sizes:z.sizes}),c.default.createElement(b,{alt:a,title:t,width:z.width,height:z.height,sizes:z.sizes,src:z.src,crossOrigin:this.props.crossOrigin,srcSet:z.srcSet,style:k,ref:this.imageRef,onLoad:this.handleImageLoaded,onError:this.props.onError,itemProp:S})),this.state.hasNoScript&&c.default.createElement("noscript",{dangerouslySetInnerHTML:{__html:g((0,l.default)({alt:a,title:t},z))}}))}return null},t}(c.default.Component);y.defaultProps={critical:!1,fadeIn:!0,alt:"",Tag:"div"};var E=u.default.shape({width:u.default.number.isRequired,height:u.default.number.isRequired,src:u.default.string.isRequired,srcSet:u.default.string.isRequired,base64:u.default.string,tracedSVG:u.default.string,srcWebp:u.default.string,srcSetWebp:u.default.string}),S=u.default.shape({aspectRatio:u.default.number.isRequired,src:u.default.string.isRequired,srcSet:u.default.string.isRequired,sizes:u.default.string.isRequired,base64:u.default.string,tracedSVG:u.default.string,srcWebp:u.default.string,srcSetWebp:u.default.string});y.propTypes={resolutions:E,sizes:S,fixed:E,fluid:S,fadeIn:u.default.bool,title:u.default.string,alt:u.default.string,className:u.default.oneOfType([u.default.string,u.default.object]),critical:u.default.bool,crossOrigin:u.default.oneOfType([u.default.string,u.default.bool]),style:u.default.object,imgStyle:u.default.object,placeholderStyle:u.default.object,placeholderClassName:u.default.string,backgroundColor:u.default.oneOfType([u.default.string,u.default.bool]),onLoad:u.default.func,onError:u.default.func,onStartLoad:u.default.func,Tag:u.default.string,itemProp:u.default.string};var v=y;t.default=v},686:function(e,t,a){"use strict";a(331)("fixed",function(e){return function(){return e(this,"tt","","")}})}}]);
//# sourceMappingURL=component---src-pages-settings-integrations-ifttt-js-23f1b08024b0fb2bbe11.js.map