(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{186:function(e,t,n){"use strict";n.r(t);n(238),n(241),n(36),n(84),n(222);var a=n(223),o=n.n(a),r=(n(213),n(195)),i=n.n(r),c=(n(200),n(201)),s=n.n(c),l=(n(57),n(44),n(24),n(7)),u=n.n(l),m=n(197),p=n(0),d=n.n(p),h=n(205),g=n(206),f=(n(227),n(228)),y=n.n(f),E=(n(597),n(599)),v=n.n(E),b=(n(218),n(219)),w=n.n(b),k=n(11),S=n.n(k),R=function(e){var t=e.id,n=e.occupancy_count,a=e.name,o=Object(p.useState)(!1),r=o[0],c=o[1];return d.a.createElement(d.a.Fragment,null,d.a.createElement(m.a,{to:"/hs/1/com.hiome/"+t+"/~~",className:"room "+(n>0?"active":""),title:a},d.a.createElement(s.a,{icon:"ellipsis",shape:"circle",ghost:!0,onClick:function(e){return e.preventDefault(),c(!0),!1},style:{marginRight:"10px",verticalAlign:"middle",color:n>0?"#000":"#a0a0a0"}}),n," ",a),d.a.createElement(y.a,{title:a,visible:r,onOk:function(){return c(!1)},onCancel:function(){return c(!1)},okText:"Done",cancelButtonProps:{style:{display:"none"}}},d.a.createElement("p",null,"You can change ",a,"'s occupancy count, but in order to help me learn, please ",d.a.createElement(m.a,{to:"/door"},"tell me which entry I got wrong"),"!"),d.a.createElement("div",{style:{textAlign:"center",marginBottom:"30px"}},d.a.createElement(v.a,{min:0,max:99,autoFocus:!0,value:n,onChange:function(e){return function(e,t,n,a){e=parseInt(e),!isNaN(e)&&e!==a&&e>=0&&(g.a.write("com.hiome/gui/to/com.hiome/"+t+"/occupancy",e),w.a.success("Updated "+n+"'s occupancy to "+e))}(e,t,a,n)},size:"large",type:"number"})),d.a.createElement("p",null,d.a.createElement(m.a,{to:"/door"},d.a.createElement(i.a,{type:"like"})," Calibrate Hiome")),d.a.createElement("p",null,d.a.createElement(m.a,{to:"/hs/1/com.hiome/"+t+"/~~"},d.a.createElement(i.a,{type:"history"})," ",a," Logs")),d.a.createElement("p",null,d.a.createElement(m.a,{to:"/settings/room?id="+t},d.a.createElement(i.a,{type:"setting"})," ",a," Settings"))))};R.propTypes={id:S.a.string.isRequired,occupancy_count:S.a.number.isRequired,name:S.a.string.isRequired};n(402);var A=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).state={rooms:[],loading:!0,missingSensors:0},t}u()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;fetch("/api/1/rooms").then(function(e){return e.json()}).then(function(t){return e.setState({rooms:t,loading:!1})}),fetch("/api/1/sensors?type=door").then(function(e){return e.json()}).then(function(t){return e.setState({missingSensors:t.filter(function(e){return null===e.room_id}).length})}),g.a.subscribe("hs/1/com.hiome/+/occupancy",function(e){this.setState(function(t,n){var a=t.rooms,o=a,r=Array.isArray(o),i=0;for(o=r?o:o[Symbol.iterator]();;){var c;if(r){if(i>=o.length)break;c=o[i++]}else{if((i=o.next()).done)break;c=i.value}var s=c;if(s.id===e.object_id){s.occupancy_count=e.val;break}}return{rooms:a}})}.bind(this))},n.addRoomRow=function(){return d.a.createElement(m.a,{key:"add_sensor",to:"/sensors/add",className:"room active",title:"Add New Sensor"},d.a.createElement(s.a,{icon:"plus",shape:"circle",ghost:!0,style:{marginRight:"10px",verticalAlign:"middle",color:"#000"}})," Add ",this.state.missingSensors," Door",1===this.state.missingSensors?"":"s")},n.renderRooms=function(){return this.state.loading,d.a.createElement(o.a,{size:"large",indicator:d.a.createElement(i.a,{type:"loading"}),style:{textAlign:"center",margin:"10em 0",display:"block"}})},n.render=function(){return d.a.createElement(h.a,{title:"Rooms"},this.renderRooms())},t}(p.Component);t.default=A}}]);
//# sourceMappingURL=component---src-pages-index-js-b5e9f19e1891dbfca111.js.map