{"version":3,"sources":["webpack:///./src/pages/settings/advanced.jsx","webpack:///./src/components/SettingsMenu.js","webpack:///divider/style/index.jsx","webpack:///divider/index.jsx"],"names":["confirm","AdancedSettingsPage","disconnectHomekit","title","content","onOk","client","connect","window","location","host","on","publish","Date","now","end","okText","okType","disconnectHue","factoryReset","updateSensors","render","react__WEBPACK_IMPORTED_MODULE_9___default","a","createElement","_components_Layout__WEBPACK_IMPORTED_MODULE_12__","_components_SettingsMenu__WEBPACK_IMPORTED_MODULE_11__","page","antd_lib_alert__WEBPACK_IMPORTED_MODULE_5___default","message","description","type","showIcon","antd_lib_divider__WEBPACK_IMPORTED_MODULE_3___default","antd_lib_button__WEBPACK_IMPORTED_MODULE_1___default","onClick","this","key","PureComponent","SettingsMenu","_ref","react__WEBPACK_IMPORTED_MODULE_3___default","antd_lib_menu__WEBPACK_IMPORTED_MODULE_1___default","selectedKeys","mode","Item","gatsby__WEBPACK_IMPORTED_MODULE_2__","to","propTypes","PropTypes","string","isRequired","__webpack_require__","React","_interopRequireWildcard","_classnames","_configProvider","__rest","s","e","t","p","Object","getOwnPropertySymbols","i","length","props","ConfigConsumer","_classNames","getPrefixCls","customizePrefixCls","prefixCls","_props$type","_props$orientation","orientation","className","children","dashed","restProps","orientationPrefix","classString","concat","_defineProperty","_extends","role"],"mappings":"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","file":"component---src-pages-settings-advanced-jsx-c3bee7c5628b90405d36.js","sourcesContent":["import { Button, Divider, Modal, Alert } from \"antd\"\nimport React, { PureComponent } from 'react'\nimport { connect } from 'mqtt/dist/mqtt'\n\nimport SettingsMenu from \"../../components/SettingsMenu\"\nimport Layout from \"../../components/Layout\"\n\nconst { confirm } = Modal\n\nclass AdancedSettingsPage extends PureComponent {\n  disconnectHomekit = () => {\n    confirm({\n      title: `Are you sure you want to reset HomeKit?`,\n      content: \"This will force Hiome Core to forget your HomeKit setup. You should remove Hiome from HomeKit first.\",\n      onOk: () => {\n        const client = connect(`ws://${window.location.host}:1884`)\n        client.on('connect', () => client.publish(\n          'hiome/1/api', `{\"val\": \"homekitReset\", \"type\": \"core\", \"ts\": ${Date.now() / 1000 | 0}}`, () => client.end()))\n      },\n      okText: 'Reset',\n      okType: 'danger'\n    })\n  }\n\n  disconnectHue = () => {\n    confirm({\n      title: `Are you sure you want to reset Hue?`,\n      content: \"This will force Hiome Core to forget your Philips Hue token.\",\n      onOk: () => {\n        const client = connect(`ws://${window.location.host}:1884`)\n        client.on('connect', () => client.publish(\n          'hiome/1/api', `{\"val\": \"hueReset\", \"type\": \"core\", \"ts\": ${Date.now() / 1000 | 0}}`, () => client.end()))\n      },\n      okText: 'Reset',\n      okType: 'danger'\n    })\n  }\n\n  factoryReset = () => {\n    confirm({\n      title: `Are you sure you want to factory reset Hiome Core?`,\n      content: \"This will delete all of your data and cannot be undone! Hiome Core will be unavailable for about 10 minutes as it reboots...\",\n      onOk: () => {\n        const client = connect(`ws://${window.location.host}:1884`)\n        client.on('connect', () => client.publish(\n          'hiome/1/api', `{\"val\": \"factoryReset\", \"type\": \"core\", \"ts\": ${Date.now() / 1000 | 0}}`, () => client.end()))\n      },\n      okText: 'Reset',\n      okType: 'danger'\n    })\n  }\n\n  updateSensors = () => {\n    confirm({\n      title: `Are you sure you want to update firmware right now?`,\n      content: \"Hiome will not update occupancy counts while it updates your sensors. This process takes about 1 minute per sensor.\",\n      onOk: () => {\n        const client = connect(`ws://${window.location.host}:1884`)\n        client.on('connect', () => client.publish(\n          'hiome/1/api', `{\"val\": \"updateFirmware\", \"type\": \"core\", \"ts\": ${Date.now() / 1000 | 0}}`, () => client.end()))\n      },\n      okText: 'Update',\n      okType: 'primary'\n    })\n  }\n\n  render() {\n    return (\n      <Layout title=\"Settings\">\n        <SettingsMenu page=\"advanced\" />\n\n        <Alert message=\"Advanced Settings\" description=\"These settings can cause permanent data loss. You should not mess with them unless directed by support!\" type=\"warning\" showIcon />\n\n        <Divider />\n        <p>\n        Force your sensors to update their firmware immediately.\n        <br/><br/>\n        <Button onClick={this.updateSensors} key=\"updateFirmware\">Update Sensor Firmware</Button>\n        </p>\n\n        <Divider />\n        <p>\n        Delete cached Philips Hue configuration. This will require you to pair Hiome with your Hue Bridge again.\n        <br/><br/>\n        <Button type=\"danger\" onClick={this.disconnectHue} key=\"resetHomekit\">Reset Hue</Button>\n        </p>\n\n        <Divider />\n        <p>\n        Delete cached HomeKit configuration. Only use this if you're having issues re-adding Hiome to HomeKit.\n        <br/><br/>\n        <Button type=\"danger\" onClick={this.disconnectHomekit} key=\"resetHomekit\">Reset HomeKit</Button>\n        </p>\n\n        <Divider />\n        <p>\n        Reset Hiome Core back to factory default. <strong>This will permanently delete all your data!</strong>\n        <br/><br/>\n        <Button type=\"danger\" onClick={this.factoryReset} key=\"resetHomekit\">Factory Reset</Button>\n        </p>\n      </Layout>\n    )\n  }\n}\n\nexport default AdancedSettingsPage\n","import { Link } from \"gatsby\"\nimport { Menu } from \"antd\"\nimport React from \"react\"\nimport PropTypes from \"prop-types\"\n\nconst SettingsMenu = ({ page }) => (\n  <Menu selectedKeys={[page]} mode=\"horizontal\">\n    <Menu.Item key=\"doors\">\n      <Link to=\"/settings\">Doors</Link>\n    </Menu.Item>\n    <Menu.Item key=\"rooms\">\n      <Link to=\"/settings/rooms\">Rooms</Link>\n    </Menu.Item>\n    <Menu.Item key=\"homekit\">\n      <Link to=\"/settings/integrations/homekit\">HomeKit</Link>\n    </Menu.Item>\n    <Menu.Item key=\"hue\">\n      <Link to=\"/settings/integrations/hue\">Hue</Link>\n    </Menu.Item>\n    <Menu.Item key=\"ifttt\">\n      <Link to=\"/settings/integrations/ifttt\">IFTTT</Link>\n    </Menu.Item>\n  </Menu>\n)\n\nSettingsMenu.propTypes = {\n  page: PropTypes.string.isRequired\n}\n\nexport default SettingsMenu\n","import '../../style/index.less';\nimport './index.less';\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { ConfigConsumer } from '../config-provider';\nconst Divider = props => (<ConfigConsumer>\n    {({ getPrefixCls }) => {\n    const { prefixCls: customizePrefixCls, type = 'horizontal', orientation = 'center', className, children, dashed } = props, restProps = __rest(props, [\"prefixCls\", \"type\", \"orientation\", \"className\", \"children\", \"dashed\"]);\n    const prefixCls = getPrefixCls('divider', customizePrefixCls);\n    const orientationPrefix = orientation.length > 0 ? `-${orientation}` : orientation;\n    const classString = classNames(className, prefixCls, `${prefixCls}-${type}`, {\n        [`${prefixCls}-with-text${orientationPrefix}`]: children,\n        [`${prefixCls}-dashed`]: !!dashed,\n    });\n    return (<div className={classString} {...restProps} role=\"separator\">\n          {children && <span className={`${prefixCls}-inner-text`}>{children}</span>}\n        </div>);\n}}\n  </ConfigConsumer>);\nexport default Divider;\n"],"sourceRoot":""}