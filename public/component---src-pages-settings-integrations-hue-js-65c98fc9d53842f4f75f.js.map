{"version":3,"sources":["webpack:///./src/pages/settings/integrations/hue.js","webpack:///./src/components/LayoutPage.js","webpack:///./src/components/SettingsMenu.js"],"names":["HueSettingsPage","state","status","scanForBridge","_this","setState","client","connect","window","location","host","on","publish","disconnectHue","setTimeout","componentDidMount","subscribe","qos","t","m","p","toString","message","JSON","parse","this","bind","renderHueButton","react__WEBPACK_IMPORTED_MODULE_9___default","a","createElement","width","height","viewBox","version","xmlns","xmlnsXlink","stroke","strokeWidth","fill","fillRule","d","id","transform","fail","antd_lib_result__WEBPACK_IMPORTED_MODULE_3___default","title","subTitle","extra","antd_lib_button__WEBPACK_IMPORTED_MODULE_5___default","onClick","dispatchEvent","Event","key","type","noBridgesFound","renderLoadingText","start","Fragment","icon","antd_lib_icon__WEBPACK_IMPORTED_MODULE_1___default","connected","renderPage","render","_components_LayoutPage__WEBPACK_IMPORTED_MODULE_12__","goBack","_components_seo__WEBPACK_IMPORTED_MODULE_13__","_components_SettingsMenu__WEBPACK_IMPORTED_MODULE_11__","page","Component","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","_header__WEBPACK_IMPORTED_MODULE_2__","LayoutPage","_ref","children","headline","className","role","aria-hidden","propTypes","PropTypes","node","isRequired","bool","defaultProps","SettingsMenu","react__WEBPACK_IMPORTED_MODULE_3___default","antd_lib_menu__WEBPACK_IMPORTED_MODULE_1___default","selectedKeys","mode","Item","gatsby__WEBPACK_IMPORTED_MODULE_2__","to","string"],"mappings":"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","file":"component---src-pages-settings-integrations-hue-js-65c98fc9d53842f4f75f.js","sourcesContent":["import { Icon, Button, Result } from \"antd\"\nimport React, { Component } from 'react'\nimport { connect } from 'mqtt/dist/mqtt'\n\nimport SettingsMenu from \"../../../components/SettingsMenu\"\nimport LayoutPage from \"../../../components/LayoutPage\"\nimport SEO from \"../../../components/seo\"\n\nclass HueSettingsPage extends Component {\n  state = {\n    status: \"start\"\n  }\n\n  componentDidMount() {\n    const client = connect(`ws://${window.location.host}:1884`)\n    client.on('connect', () => client.subscribe('_hiome/integrate/hue', {qos: 1}))\n    client.on('message', function(t, m, p) {\n      if (m == null || m.toString() === 'connect' || m.toString() === 'disconnect') return\n      const message = JSON.parse(m.toString())\n      this.setState({status: message.status})\n      if (message.status === 'no_link_pushed') {\n        // try again in 20 seconds\n        setTimeout(() => { client.publish('_hiome/integrate/hue', 'connect') }, 20000)\n      }\n    }.bind(this))\n  }\n\n  scanForBridge = () => {\n    this.setState({status: 'start'})\n    const client = connect(`ws://${window.location.host}:1884`)\n    client.on('connect', () => client.publish('_hiome/integrate/hue', 'connect'))\n  }\n\n  disconnectHue = () => {\n    this.setState({status: 'start'})\n    const client = connect(`ws://${window.location.host}:1884`)\n    client.on('connect', () => client.publish('_hiome/integrate/hue', 'disconnect'))\n    setTimeout(() => { client.publish('_hiome/integrate/hue', 'connect') }, 1000)\n  }\n\n  renderHueButton() {\n    return <svg width=\"78px\" height=\"74px\" viewBox=\"0 0 39 37\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlnsXlink=\"http://www.w3.org/1999/xlink\">\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n            <g fillRule=\"nonzero\">\n                <g fill=\"#4990E2\">\n                    <path d=\"M28,2.16300593 L4,2.16300593 C2.9,2.16300593 2,3.05862595 2,4.15327265 L2,28.0194666 C2,29.1141133 2.9,30.0097333 4,30.0097333 L28,30.0097333 C29.1,30.0097333 30,29.1141133 30,28.0194666 L30,4.15327265 C30,3.05862595 29.1,2.16300593 28,2.16300593 Z M4,0 L28,0 C30.21,0 32,1.78128871 32,3.98053343 L32,28.0194666 C32,30.2187113 30.21,32 28,32 L4,32 C1.79,32 0,30.2187113 0,28.0194666 L0,3.98053343 C0,1.78128871 1.79,0 4,0 Z M16,22.75 C12.2720779,22.75 9.25,19.7279221 9.25,16 C9.25,12.2720779 12.2720779,9.25 16,9.25 C19.7279221,9.25 22.75,12.2720779 22.75,16 C22.75,19.7279221 19.7279221,22.75 16,22.75 Z M16,21.25 C18.8994949,21.25 21.25,18.8994949 21.25,16 C21.25,13.1005051 18.8994949,10.75 16,10.75 C13.1005051,10.75 10.75,13.1005051 10.75,16 C10.75,18.8994949 13.1005051,21.25 16,21.25 Z M9.5,7 C8.94771525,7 8.5,6.55228475 8.5,6 C8.5,5.44771525 8.94771525,5 9.5,5 C10.0522847,5 10.5,5.44771525 10.5,6 C10.5,6.55228475 10.0522847,7 9.5,7 Z M16,7 C15.4477153,7 15,6.55228475 15,6 C15,5.44771525 15.4477153,5 16,5 C16.5522847,5 17,5.44771525 17,6 C17,6.55228475 16.5522847,7 16,7 Z M22.5,7 C21.9477153,7 21.5,6.55228475 21.5,6 C21.5,5.44771525 21.9477153,5 22.5,5 C23.0522847,5 23.5,5.44771525 23.5,6 C23.5,6.55228475 23.0522847,7 22.5,7 Z\" id=\"Shape\"></path>\n                </g>\n                <g transform=\"translate(25.049963, 25.208721) rotate(-34.000000) translate(-25.049963, -25.208721) translate(14.549963, 11.708721)\" stroke=\"#000000\" fill=\"#FFFFFF\">\n                    <path d=\"M17.3860309,10.3492743 L17.3860309,8.90823286 C17.3821463,7.93619786 16.6068874,7.15029831 15.6518977,7.15029831 C14.6969081,7.15029831 13.9216491,7.93619786 13.9177645,8.90823286 L13.9177645,7.46534571 C13.9174111,6.56591382 13.2526624,5.81059723 12.3743708,5.71167406 C11.4960791,5.6127509 10.6851722,6.20186241 10.4916312,7.07945571 L10.4916312,1.95806 C10.4877828,0.985998692 9.71251309,0.20005841 8.75749773,0.20005841 C7.80248238,0.20005841 7.02721269,0.985998692 7.02336427,1.95806 L7.02336427,14.9040357 L3.69216427,11.1462971 C3.00611793,10.3721325 1.8438986,10.2822521 1.05081518,10.9420281 C0.257731752,11.6018041 0.112946146,12.7789982 0.721764267,13.61741 L8.14203093,23.8395186 C9.94970491,26.3297864 13.1234576,27.3579924 16.0127302,26.3894022 C18.9020028,25.420812 20.8542996,22.6741662 20.8542987,19.5779 L20.8542987,10.3492743 C20.8505051,9.37717305 20.0752192,8.59117093 19.1201648,8.59117093 C18.1651104,8.59117093 17.3898245,9.37717305 17.3860309,10.3492743 L17.3860309,10.3492743 Z\" id=\"Shape\"></path>\n                </g>\n            </g>\n        </g>\n    </svg>\n  }\n\n  fail() {\n    return <Result\n      status=\"error\"\n      title=\"Something Went Wrong\"\n      subTitle=\"Hiome was unable to connect to Philips Hue.\"\n      extra={[\n        <Button onClick={() => window.dispatchEvent(new Event(\"helpMe\"))} key=\"contact_us\">Contact Support</Button>,\n        <Button onClick={this.scanForBridge} type=\"primary\" key=\"try_again\">Try Again</Button>\n      ]}\n    />\n  }\n\n  noBridgesFound() {\n    return <Result\n      status=\"warning\"\n      title=\"No Philips Hue Bridge Found\"\n      subTitle=\"Make sure your Hue Bridge is on the same network as Hiome Core.\"\n      extra={[\n        <Button onClick={() => window.dispatchEvent(new Event(\"helpMe\"))} key=\"contact_us\">Contact Support</Button>,\n        <Button onClick={this.scanForBridge} type=\"primary\" key=\"try_again\">Try Again</Button>\n      ]}\n    />\n  }\n\n  renderLoadingText() {\n    if (this.state.status === 'no_link_pushed')\n      return 'Hue Bridge found, waiting for Link button'\n    else\n      return 'Searching for Hue Bridge'\n  }\n\n  start() {\n    return <>\n      <Result\n        icon={this.renderHueButton()}\n        title=\"Connect Philips Hue with Hiome Core\"\n        subTitle=\"Push the Link button on your Hue Bridge to control your lights based on occupancy.\"\n        extra={[\n          <p key=\"loading\"><Icon type=\"loading\" /> &nbsp; {this.renderLoadingText()}</p>\n        ]} />\n    </>\n  }\n\n  connected() {\n    return <Result\n      status=\"success\"\n      title=\"Hiome is connected to Philips Hue!\"\n      extra={[\n        <Button type=\"danger\" onClick={this.disconnectHue} key=\"disconnect\">Disconnect from Hue Bridge</Button>\n      ]}\n    >\n      <p><strong>Create a Hue group for each room with the same name.</strong></p>\n      <p>When a room in Hiome is occupied after sunset, all devices in a Hue group with the same name will be turned on.\n          For example, if your Living Room is occupied, the \"Living Room\" group will be turned on.</p>\n      <p>If you want to turn on lights during the day too, create another group with the same room name + Daytime\n          (\"Living Room Daytime\" in our example).</p>\n      <p>When a room is no longer occupied, all devices in the Hue group will be turned off.</p>\n    </Result>\n  }\n\n  renderPage() {\n    if (this.state.status === 'start' || this.state.status === 'no_link_pushed') return this.start()\n    else if (this.state.status === 'connected') return this.connected()\n    else if (this.state.status === 'no_bridges_found') return this.noBridgesFound()\n    else if (this.state.status === 'fail') return this.fail()\n  }\n\n  render() {\n    return (\n      <LayoutPage goBack={true}>\n        <SEO title=\"Settings\" />\n        <h1>Settings</h1>\n        <SettingsMenu page=\"hue\" />\n\n        {this.renderPage()}\n      </LayoutPage>\n    )\n  }\n}\n\nexport default HueSettingsPage\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport Header from \"./header\"\nimport \"./layout.css\"\n\nconst LayoutPage = ({ children, headline, goBack }) => (\n  <div id=\"wrapper\">\n    <Header goBack={goBack} />\n    {headline}\n    <main className=\"page\">\n      {children}\n      <footer>&copy; Hiome Inc 2019</footer>\n    </main>\n    <div className=\"helloScroller\">\n      <span role=\"img\" aria-hidden>👋</span>\n    </div>\n  </div>\n)\n\nLayoutPage.propTypes = {\n  children: PropTypes.node.isRequired,\n  headline: PropTypes.node,\n  goBack: PropTypes.bool,\n}\n\nLayoutPage.defaultProps = {\n  goBack: false,\n  headline: null\n}\n\nexport default LayoutPage\n","import { Link } from \"gatsby\"\nimport { Menu } from \"antd\"\nimport React from \"react\"\nimport PropTypes from \"prop-types\"\n\nconst SettingsMenu = ({ page }) => (\n  <Menu selectedKeys={[page]} mode=\"horizontal\">\n    <Menu.Item key=\"doors\">\n      <Link to=\"/settings\">Doors</Link>\n    </Menu.Item>\n    <Menu.Item key=\"rooms\">\n      <Link to=\"/settings/rooms\">Rooms</Link>\n    </Menu.Item>\n    <Menu.Item key=\"hue\">\n      <Link to=\"/settings/integrations/hue\">Hue</Link>\n    </Menu.Item>\n  </Menu>\n)\n\nSettingsMenu.propTypes = {\n  page: PropTypes.string.isRequired\n}\n\nexport default SettingsMenu\n"],"sourceRoot":""}